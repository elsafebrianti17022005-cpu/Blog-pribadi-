<!DOCTYPE html><html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Dark Space</title><style>
:root{--bg:#0f1115;--card:#181b22;--accent:#8b5cf6;--text:#e5e7eb}
body{margin:0;background:var(--bg);color:var(--text);font-family:sans-serif}
.center{height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:15px}
button{background:var(--accent);border:none;color:white;padding:10px 16px;border-radius:12px}
input,textarea{background:#111;border:1px solid #333;color:white;border-radius:10px;padding:10px;width:100%}
#blog{display:none;padding:20px;max-width:700px;margin:auto}
.card{background:var(--card);padding:15px;border-radius:18px;margin-bottom:20px;animation:fade .25s ease}
@keyframes fade{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:none}}
.caption{outline:none;padding:6px;border-radius:8px}
.caption:focus{background:#111}
.mediaRow{display:flex;gap:12px;overflow-x:auto;padding-top:10px}
.mediaRow img,.mediaRow video{height:220px;border-radius:12px}
.mediaRow audio{width:220px}
.mediaWrap{position:relative}
.mediaWrap button{position:absolute;bottom:6px;right:6px;padding:4px 10px;background:#000a;border-radius:10px}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
#confirmBox{position:fixed;inset:0;background:#0008;display:none;align-items:center;justify-content:center}
.confirmCard{background:var(--card);padding:20px;border-radius:18px;text-align:center;max-width:260px}
.confirmBtns{display:flex;gap:10px;justify-content:center;margin-top:15px}
</style><!-- Firebase --><script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script><script>
const firebaseConfig={apiKey:"AIzaSyCNDVQBYSsFf55Q8_AD-jGk4Gt1JvS0dl0",authDomain:"blog-pribadi-5cb05.firebaseapp.com",projectId:"blog-pribadi-5cb05",storageBucket:"blog-pribadi-5cb05.firebasestorage.app",messagingSenderId:"693545692825",appId:"1:693545692825:web:ab65e1b29cf4dcadf9d208"};
firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const storage=firebase.storage();
</script></head>
<body><div id="login" class="center">
<h1>ðŸŒ™ My Private Space</h1>
<input id="pass" type="password" placeholder="password">
<button onclick="enter()">Masuk</button>
</div><div id="blog">
<div class="topbar"><h2>Blogku</h2><button onclick="location.reload()">Keluar</button></div>
<div class="card"><textarea id="text" placeholder="Tulis isi pikiran..."></textarea>
<input id="file" type="file" multiple accept="image/*,video/*,audio/*">
<button onclick="addPost()">Posting</button></div>
<div id="posts"></div>
</div><div id="confirmBox"><div class="confirmCard"><div id="confirmText">Yakin?</div><div class="confirmBtns"><button onclick="confirmYes()">Iya</button><button onclick="closeConfirm()">Tidak</button></div></div></div><script>
const PASSWORD="1234";let confirmAction=null;
function ask(t,a){confirmText.textContent=t;confirmBox.style.display="flex";confirmAction=a}
function confirmYes(){confirmBox.style.display="none";confirmAction&&confirmAction()}
function closeConfirm(){confirmBox.style.display="none"}
function enter(){if(pass.value===PASSWORD){login.style.display="none";blog.style.display="block";listenPosts()}else alert("Password salah")}

async function uploadFile(file){const ref=storage.ref("media/"+Date.now()+"_"+file.name);await ref.put(file);return await ref.getDownloadURL()}

async function addPost(){const t=text.value.trim();const files=[...file.files];let media=[];for(const f of files){const url=await uploadFile(f);media.push({type:f.type,url})}await db.collection("posts").add({text:t,media,created:Date.now()});text.value="";file.value=""}

async function addMedia(id,input){const files=[...input.files];if(!files.length)return;const doc=db.collection("posts").doc(id);const snap=await doc.get();let data=snap.data();for(const f of files){const url=await uploadFile(f);data.media.push({type:f.type,url})}await doc.update({media:data.media});input.value=""}

function delPost(id){ask("Hapus postingan?",async()=>{await db.collection("posts").doc(id).delete()})}
function delMedia(id,i){ask("Hapus media ini?",async()=>{const doc=db.collection("posts").doc(id);const snap=await doc.get();let d=snap.data();d.media.splice(i,1);await doc.update({media:d.media})})}

function makeMedia(m,id,i){let w=document.createElement('div');w.className='mediaWrap';let el;if(m.type.startsWith('image')){el=document.createElement('img');el.src=m.url}
else if(m.type.startsWith('video')){el=document.createElement('video');el.src=m.url;el.controls=true;el.playsInline=true}
else if(m.type.startsWith('audio')){el=document.createElement('audio');el.src=m.url;el.controls=true}
w.appendChild(el);let b=document.createElement('button');b.textContent='<';b.onclick=()=>delMedia(id,i);w.appendChild(b);return w}

function render(posts){const wrap=document.getElementById('posts');wrap.innerHTML='';posts.forEach(p=>{const card=document.createElement('div');card.className='card';const cap=document.createElement('div');cap.className='caption';cap.contentEditable=true;cap.textContent=p.text||'Klik untuk menulis...';cap.oninput=()=>db.collection('posts').doc(p.id).update({text:cap.textContent});card.appendChild(cap);if(p.media?.length){const row=document.createElement('div');row.className='mediaRow';p.media.forEach((m,i)=>row.appendChild(makeMedia(m,p.id,i)));card.appendChild(row)}const inp=document.createElement('input');inp.type='file';inp.multiple=true;inp.accept='image/*,video/*,audio/*';inp.onchange=()=>addMedia(p.id,inp);card.appendChild(inp);const del=document.createElement('button');del.textContent='<';del.onclick=()=>delPost(p.id);card.appendChild(del);wrap.appendChild(card)})}

function listenPosts(){db.collection('posts').orderBy('created','desc').onSnapshot(s=>{let arr=[];s.forEach(d=>arr.push({id:d.id,...d.data()}));render(arr)})}
</script></body>
</html>